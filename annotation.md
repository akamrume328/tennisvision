テニス動画アノテーションルールブック (YOLOv8向け)

1. はじめに

目的: 本ルールブックは、テニス動画における主要なオブジェクト（テニスボール、選手、コートなど）をYOLOv8モデルで検出するための、高品質なアノテーションデータを作成することを目的とします。
対象: テニス競技の動画全般（試合、練習風景など）。
アノテーションツール: (例: CVAT, Label Studioなど、使用するツール名を記載)
検出モデル: YOLOv8
2. アノテーション対象オブジェクトとラベル

以下のオブジェクトを検出し、指定されたラベル名を付与します。

| No. | オブジェクト名   | ラベル名        | 具体例と注意点                                                                                                                               |
| :-: | :--------------- | :-------------- | :------------------------------------------------------------------------------------------------------------------------------------------- |
|  1  | テニスボール     | ball          | 黄色いテニスボール。変形していても、ブレていても、ボールと認識できる場合はアノテーションする。ラケットに当たっている瞬間も含む。                                 |
|  2  | 選手             | player        | コート内でプレーしている選手。ユニフォーム、体全体を囲む。複数選手がいる場合は区別せず全てplayerとするか、player_A, player_Bのように区別するか事前に定義。 |
|  3  | 審判             | umpire        | 主審、線審など。選手と服装が異なる場合が多い。                                                                                                    |
|  4  | コート（全体）   | court         | (オプション) コート全体を一つのオブジェクトとして囲む場合。セグメンテーションの方が適している場合もあるが、バウンディングボックスで囲む場合はコートの主要なプレーエリアを含むようにする。 |
|  5  | ネット           | net           | コート中央のネット。                                                                                                                          |
|  6  | (オプション) ラケット | racket        | 選手が持っているラケット。選手とは別オブジェクトとしてアノテーションする場合。                                                                                             |
|  7  | (オプション) コートライン | court_line    | (注意) YOLOのバウンディングボックスで細い線を検出するのは難易度が高い。もし行う場合は、ラインの一部を代表する形で囲むか、セグメンテーションを検討。ルールを明確にする。  |

3. バウンディングボックス作成基準

基本ルール:
タイトフィット: オブジェクトの可視部分全体を、余白が最小限になるようにぴったりと囲みます。背景を含めすぎないように注意してください。
オブジェクト全体: 原則として、オブジェクトの全体がボックス内に収まるようにします。
水平なボックス: YOLOv8は水平なバウンディングボックスを基本とします。回転したオブジェクトも、それを包含する最小の水平な四角形で囲みます。
テニス動画特有の基準:
ボール (ball):
非常に小さいため、正確に中心を捉えて囲んでください。
高速で移動しブレている場合は、ブレている領域の中心を推定して囲みます。
ラケットに隠れてほぼ見えない場合や、他のオブジェクトと重なり判別困難な場合は、無理にアノテーションせず、「4. オクルージョン」のルールに従ってください。
選手 (player):
手足の先端まで含めて、体全体を囲みます。
選手が持っているラケットをplayerのバウンディングボックスに含めるか、別途racketとしてアノテーションするかは事前に統一します (例: playerに含める場合は、ラケットの先端まで囲む)。
ダイナミックな動き（サーブ、スマッシュなど）でも、体全体を捉えるようにします。
コートライン (court_line) (もしアノテーションする場合):
どの程度の長さのラインを一つのインスタンスとするか明確な基準を設けます (例: ベースライン全体を一つ、サービスボックスの1辺を一つなど)。
ラインの太さも考慮し、ライン全体がボックス内に収まるようにします。
4. オクルージョン（隠れ）の扱い

オブジェクトが他のオブジェクトや障害物によって部分的に隠れている場合。
ルール:
50%以上の可視性 (推奨): オブジェクトの50%以上が見えている場合にアノテーションします。見えている部分をタイトに囲みます。
推測しない: 隠れている部分を無理に推測して大きなボックスを作成しないでください。
ラベルの変更: (オプション) 隠れている度合いに応じて、player_occluded のような別ラベルを付与することも検討できますが、YOLOv8の学習ではクラス数を増やしすぎない方が良い場合もあります。
例:
選手がネットで半分隠れている場合 → 見えている上半身を囲み player とラベル付け。
ボールが選手の足元にあり、一部しか見えない場合 → 見えている部分がボールと明確に判断でき、50%以上見えていれば ball としてアノテーション。
5. 見切れ（Truncation）の扱い

オブジェクトがフレームの端で見切れている場合。
ルール:
見える範囲でアノテーション: フレーム内に見えている部分のみを囲みます。
主要部分の有無: オブジェクトの主要な部分が見えており、それが何のオブジェクトか判断できる場合にアノテーションします。 (例: 選手の頭部と肩が見切れているが、胴体が見えていればアノテーションする)。
著しい見切れ: オブジェクトの大部分が見切れていて、それが何か判別困難な場合や、ごく一部しか映っていない場合はアノテーションしません。
例:
選手の腕だけがフレームの端に映っている → アノテーションしない。
選手の顔と上半身がフレーム内にあり、下半身が見切れている → 見えている顔と上半身を囲み player とラベル付け。
6. ラベル付けのルール

「2. アノテーション対象オブジェクトとラベル」で定義された正確なラベル名を使用してください。
ラベル名の大文字・小文字、単数形・複数形は完全に統一してください (例: 全て小文字、単数形)。
判断に迷うオブジェクトについては、無理にラベル付けせず、チーム内で確認・相談してください。
7. アノテーションの密度と一貫性

フレームごと: 原則として、動画の各フレームで、対象オブジェクトが存在する場合は全てアノテーションします。
トラッキングツールの利用: アノテーションツールにトラッキング機能がある場合は活用し、効率化を図ります。ただし、トラッキングが外れた場合は手動で正確に修正してください。特にボールのように動きの速いものは注意が必要です。
一貫性: 全てのフレーム、全ての動画を通じて、同じ基準でアノテーションを行うことが非常に重要です。
8. 曖昧なケースの判断基準とエスカレーション

判断に迷う場合:
遠すぎてオブジェクトが非常に小さい、不鮮明。
複数のオブジェクトが密集しすぎて個別の区別が困難。
上記のルールでカバーしきれない特殊なケース。
対応:
まず本ルールブックの該当箇所を確認してください。
解決しない場合は、アノテーションリーダーまたは担当者にスクリーンショット等とともに相談してください。
チームで議論し、必要であればルールブックを更新します。
9. 品質チェックのポイント

バウンディングボックスはタイトか？ (背景を含みすぎていないか、オブジェクトがはみ出していないか)
ラベルは正しいか？
オクルージョンや見切れのルールは守られているか？
フレーム間でアノテーションの基準にブレはないか？ (特にトラッキング修正時)
アノテーション漏れはないか？
10. 禁止事項

不確実なオブジェクトを無理にアノテーションすること。
ルールから逸脱した個人的な判断でアノテーションすること。
小さすぎる、またはほとんど見えないオブジェクトを無理に囲むこと (ノイズになる可能性があります)。
11. 改訂履歴

改訂日	バージョン	改訂内容	担当者
2025-05-14	1.0	初版作成	AI
(例)			

Google スプレッドシートにエクスポート
YOLOv8特有の補足

データフォーマット: YOLOv8が要求するアノテーションフォーマット（通常は.txtファイルで、各行に クラスID <x_center> <y_center> <width> <height> の正規化された値）を最終的に出力できるように、アノテーションツールを選定・設定することが重要です。このルールブックは、その元となる正確なバウンディングボックスを作成するためのものです。
クラスのバランス: 特定のクラスのサンプル数が極端に少ないと、学習がうまくいかないことがあります。アノテーション対象を選ぶ際や、動画を選定する際に考慮できると良いでしょう。
画像の品質: 低解像度、強いモーションブラー、極端な照明条件の動画はアノテーションが難しく、またモデルの学習にも影響を与える可能性があります。